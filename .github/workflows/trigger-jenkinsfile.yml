name: Notify Jenkins (No Trigger)

on:
  push:
    branches: [ master, main ]
  workflow_dispatch:

jobs:
  notify-jenkins:
    runs-on: ubuntu-latest

    steps:
      - name: Show push info
        run: |
          echo "Branch: ${GITHUB_REF_NAME}"
          echo "Commit: ${GITHUB_SHA}"

      - name: Notify Jenkins (Safe Ping Only)
        env:
          JENKINS_URL: ${{ secrets.JENKINS_URL }}
        run: |
          set +e   # Never fail workflow

          echo "Pinging Jenkins..."

          curl -s -o /dev/null -w "HTTP Status: %{http_code}\n" \
            "${JENKINS_URL}" || true

          echo "Notification sent (no trigger)."